<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/assets/css/controls.css">
	<title>Request Songs</title>
</head>
<body>

	<form id="search">
		<input type="search" placeholder="Search For..."/>
	</form>

	<script src="/assets/js/vendor.min.js"></script>
	<script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
	<script>
		var API_KEY = 'AIzaSyDg5EAtlN6aAHNmvcA53iBGPe0Mx0OzvqA';
		var API_BASE= 'https://www.googleapis.com/youtube/v3/'
		var respProto = {
			nextPage:function(){
				var params = $.extend({pageToken:this.nextPageToken},this.request.params)
				return gCall(this.request.method,params)
			}
		}

		function gCall(method,params){
			params.key = API_KEY;
			return new Promise(function(good,bad){
				$.getJSON(API_BASE+method,params,function(resp){
					resp.prototype = respProto;
					resp.request = {method:method,params:params};
					good(resp)
				}).fail(bad)
			})
		}
		var searchVideo = q=> gCall("search",{q:q,part:"snippet"});
	</script>
	<script>
 		var socket = io();
		$("#search").on("submit",function(e){
			e.preventDefault();
		})
	</script>

</body>
</html>
